<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fugazzi â€” Launch a Virtual Company in Minutes</title>
  <style>
    :root{--bg:#070b16;--panel:#0f162d;--panel2:#131d3b;--text:#ecf1ff;--muted:#9fb0da;--brand:#6d7cff;--brand2:#22d3ee;--ok:#34d399;--line:#2a3769}
    *{box-sizing:border-box} body{margin:0;font-family:Inter,Segoe UI,Arial;background:radial-gradient(1200px 560px at 85% -20%,#2f45a3 0,#070b16 62%);color:var(--text)}
    .wrap{max-width:1120px;margin:0 auto;padding:24px}.hero{padding:56px 0 20px}
    h1{font-size:46px;line-height:1.05;margin:0 0 12px;max-width:760px}.sub{color:var(--muted);font-size:18px;max-width:760px}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px;margin-top:22px}.card{background:linear-gradient(180deg,var(--panel2),var(--panel));border:1px solid var(--line);border-radius:16px;padding:16px;box-shadow:0 10px 40px #0004}
    h2{font-size:18px;margin:0 0 10px}.muted{color:var(--muted);font-size:13px}.row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
    label{font-size:12px;color:#b9c7ef;margin:0 0 6px;display:block}input,select,button{width:100%;padding:11px 12px;border-radius:11px;border:1px solid #32447d;background:#0c1430;color:var(--text)}
    input[type=range]{padding:0}button{border:0;background:linear-gradient(90deg,var(--brand),var(--brand2));font-weight:800;cursor:pointer}button:hover{filter:brightness(1.08)}
    .chips{display:flex;flex-wrap:wrap;gap:8px}.chip{padding:6px 10px;border:1px solid #365090;background:#12204a;border-radius:999px;font-size:12px;cursor:pointer;user-select:none}.chip.active{border-color:#70d6ff;background:#16356c}
    details{margin:10px 0 4px} summary{cursor:pointer;color:#c7d3f6;font-size:13px}
    .preview{min-height:360px;display:flex;flex-direction:column;gap:12px}.progress{height:10px;border-radius:999px;background:#0c1330;border:1px solid #2c3d73;overflow:hidden}.bar{height:100%;width:0;background:linear-gradient(90deg,#6d7cff,#34d399);transition:width .45s ease}
    .log{background:#0b132d;border:1px dashed #30406f;border-radius:12px;padding:10px;min-height:120px;font-family:ui-monospace,Consolas,monospace;font-size:12px;color:#b8c8f3;white-space:pre-line}
    .company{display:none;border:1px solid #2f4d86;background:#0f2047;border-radius:14px;padding:14px}.company h3{margin:0 0 8px}
    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px}.kpi{background:#0b1738;border:1px solid #324c86;padding:10px;border-radius:10px}.kpi .n{font-size:20px;font-weight:800}
    .proof{display:none;background:#0b1738;border:1px solid #35569a;border-radius:12px;padding:12px}.proof ul{margin:8px 0 0 18px;padding:0}
    .rolesGrid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
    .roleCard{background:#0d1d44;border:1px solid #35569a;border-radius:10px;padding:8px}
    .roleCard .title{font-weight:700;font-size:13px}
    .roleCard .soul{font-size:12px;color:#a9bbe9}
    .trust{display:none;background:#0c1737;border:1px solid #345393;border-radius:12px;padding:10px}.trust ul{margin:6px 0 0 18px;padding:0}
    .finalize{display:none;margin-top:8px}.ok{color:var(--ok);font-weight:700}.footer{margin:22px 0 8px;color:#8ca0d1;font-size:12px}
    @media(max-width:960px){.grid{grid-template-columns:1fr}h1{font-size:34px}.row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <p class="muted" style="margin:0 0 8px">Virtual Companies as a Service</p>
      <h1>Launch a Virtual Company in Minutes</h1>
      <p class="sub">Choose team size, business area, and operating features. We create a functional organization with teams, interactions, and deliverables.</p>
      <p class="muted" style="margin:10px 0 0;font-size:14px">No hiring, no onboarding delays â€” launch a role-mapped virtual company in minutes.</p>
    </section>

    <section class="grid">
      <div class="card">
        <h2>Configure your company</h2>
        <div class="row">
          <div>
            <label>Number of agents: <span id="agentsOut">6</span></label>
            <input id="agents" type="range" min="2" max="30" value="6" />
          </div>
          <div>
            <label>Business area</label>
            <select id="business">
              <option>SaaS / B2B Software</option><option>E-commerce / DTC</option><option>Marketing Agency</option><option>Real Estate Ops</option><option>Professional Services</option>
            </select>
          </div>
        </div>
        <div>
          <label>Primary objective</label>
          <select id="objective"><option>Acquire more customers</option><option>Automate operations</option><option>Scale outbound sales</option><option>Improve retention</option></select>
        </div>

        <details>
          <summary>Advanced options (optional)</summary>
          <div class="row" style="margin-top:10px">
            <div>
              <label>Operating region</label>
              <select id="region"><option>North America</option><option>Europe</option><option>Global / Remote</option><option>LATAM</option><option>MENA</option></select>
            </div>
            <div>
              <label>Feature modules</label>
              <div class="chips" id="features">
                <span class="chip active">24/7 Support Desk</span><span class="chip active">Outbound Lead Engine</span><span class="chip">Content Studio</span><span class="chip">CRM Automation</span><span class="chip">Analytics Control Tower</span>
              </div>
            </div>
          </div>
        </details>

        <div style="margin-top:14px">
          <p class="muted" style="margin:0 0 8px">Built for founders who need execution this week, not someday.</p>
          <button id="createBtn">Generate My Company</button>
          <p class="muted" style="margin:8px 0 0">No commitment required. Get a tailored functional organization setup package.</p>
        </div>
      </div>

      <div class="card preview">
        <h2>Live assembly preview</h2>
        <div class="progress"><div class="bar" id="bar"></div></div>
        <div class="log" id="log">Ready to build.</div>

        <div class="company" id="companyCard">
          <h3 id="companyName">Your Virtual Company</h3>
          <div class="muted" id="companyMeta"></div>
          <div class="kpis">
            <div class="kpi"><div class="muted">Agents</div><div class="n" id="kAgents">6</div></div>
            <div class="kpi"><div class="muted">Capabilities</div><div class="n" id="kCaps">2</div></div>
            <div class="kpi"><div class="muted">Setup ETA</div><div class="n">7d</div></div>
          </div>
        </div>

        <div class="proof" id="proofCard">
          <h2 style="margin:0 0 6px">Generated organization output</h2>
          <ul id="proofList"></ul>
          <div id="rolesGrid" class="rolesGrid"></div>
        </div>

        <div class="finalize" id="finalize">
          <p class="muted" style="margin:0 0 8px"><strong>Your virtual company is ready.</strong> Enter email to receive your full functional organization setup package.</p>
          <p class="muted" style="margin:0 0 8px">No commitment required. Get your setup plan first.</p>

          <div class="trust" id="trustBullets">
            <ul>
              <li>30-day operating plan</li>
              <li>KPI dashboard template</li>
              <li>Org chart + agent roles</li>
            </ul>
          </div>

          <div class="row" style="margin:8px 0 8px">
            <input id="email" type="email" placeholder="name@company.com" />
            <button id="finalizeBtn">Send My Setup Plan</button>
          </div>
          <input id="companyWebsite" type="text" autocomplete="off" tabindex="-1" style="position:absolute;left:-9999px;opacity:0" aria-hidden="true" />
          <p class="muted" style="margin:4px 0 0">We only use your email to send your company setup and onboarding steps.</p>
          <div id="done" class="muted"></div>
        </div>
      </div>
    </section>

    <p class="footer">PoC landing page by Fugazzi â€¢ Visual simulation only (no backend wired yet).</p>
  </div>

  <script>
    const agents = document.getElementById('agents');
    const agentsOut = document.getElementById('agentsOut');
    const chips = [...document.querySelectorAll('.chip')];
    const bar = document.getElementById('bar');
    const log = document.getElementById('log');
    const createBtn = document.getElementById('createBtn');
    const finalize = document.getElementById('finalize');
    const companyCard = document.getElementById('companyCard');
    const proofCard = document.getElementById('proofCard');
    const trustBullets = document.getElementById('trustBullets');
    const proofList = document.getElementById('proofList');
    const rolesGrid = document.getElementById('rolesGrid');
    const done = document.getElementById('done');
    const emailInput = document.getElementById('email');
    const honeypotInput = document.getElementById('companyWebsite');
    let generatedAt = 0;
    let dataCache = null;
    let lastGeneration = null;

    agents.addEventListener('input',()=> agentsOut.textContent = agents.value);
    chips.forEach(c=>c.addEventListener('click',()=>c.classList.toggle('active')));

    const sleep = (ms)=>new Promise(r=>setTimeout(r,ms));

    const industryMap = {
      'SaaS / B2B Software': ['saas','b2b services'],
      'E-commerce / DTC': ['ecommerce','retail'],
      'Marketing Agency': ['agency','b2b services'],
      'Real Estate Ops': ['real estate','services'],
      'Professional Services': ['agency','b2b services']
    };

    const objectiveMap = {
      'Acquire more customers': ['increase sales','growth'],
      'Automate operations': ['efficiency','automation'],
      'Scale outbound sales': ['increase sales','growth'],
      'Improve retention': ['retention','efficiency']
    };

    async function loadData(){
      if (dataCache) return dataCache;
      const [roles, archetypes, processes, rules] = await Promise.all([
        fetch('./data/roles.json').then(r=>r.json()),
        fetch('./data/archetypes.json').then(r=>r.json()),
        fetch('./data/processes.json').then(r=>r.json()),
        fetch('./data/rules.json').then(r=>r.json())
      ]);
      dataCache = { roles, archetypes, processes, rules };
      return dataCache;
    }

    function scoreRole(role, industries, objectives){
      const indScore = role.fit?.industries?.some(i => industries.includes(String(i).toLowerCase())) ? 1 : 0;
      const objScore = role.fit?.objectives?.some(o => objectives.includes(String(o).toLowerCase())) ? 1 : 0;
      const seniorityBias = role.seniority === 'lead' ? 0.05 : 0;
      return 0.45 * objScore + 0.35 * indScore + 0.2 * seniorityBias;
    }

    function pickArchetype(archetypes, business){
      if (business.includes('SaaS')) return archetypes.find(a=>a.id==='arch_b2b_saas') || archetypes[0];
      if (business.includes('E-commerce')) return archetypes.find(a=>a.id==='arch_ecommerce') || archetypes[0];
      if (business.includes('Agency') || business.includes('Services')) return archetypes.find(a=>a.id==='arch_agency') || archetypes[0];
      return archetypes[0];
    }

    function generateOrg(input, data){
      const maxAgents = (data.rules.find(r=>r.id==='rule_max_agents')?.params?.maxAgents) || 12;
      const cap = Math.min(input.teamSizeTarget, maxAgents);
      const archetype = pickArchetype(data.archetypes, input.business);
      const industries = (industryMap[input.business] || ['saas']).map(v=>v.toLowerCase());
      const objectives = (objectiveMap[input.objective] || ['growth']).map(v=>v.toLowerCase());

      const ranked = data.roles
        .map(r=>({ role:r, score: scoreRole(r, industries, objectives) }))
        .sort((a,b)=>b.score-a.score);

      const selected = [];
      const usedRoleIds = new Set();

      for (const clusterRule of archetype.roleClusters){
        const clusterCandidates = ranked
          .filter(x=>x.role.cluster===clusterRule.cluster && !usedRoleIds.has(x.role.id))
          .slice(0, clusterRule.min);
        for (const c of clusterCandidates){ selected.push(c.role); usedRoleIds.add(c.role.id); }
      }

      for (const candidate of ranked){
        if (selected.length >= cap) break;
        if (usedRoleIds.has(candidate.role.id)) continue;
        const kpiKey = String(candidate.role.kpis?.[0] || '').split(' ')[0].toLowerCase();
        const overlap = selected.some(r => String(r.kpis?.[0] || '').toLowerCase().startsWith(kpiKey) && kpiKey);
        if (overlap) continue;
        selected.push(candidate.role);
        usedRoleIds.add(candidate.role.id);
      }

      const requiredProcesses = data.processes.filter(p=>archetype.mustHaveProcesses.includes(p.id));
      for (const process of requiredProcesses){
        for (const step of process.steps){
          const hasOwner = selected.some(r => r.name === step.ownerRole);
          if (!hasOwner){
            const fallback = data.roles.find(r => r.name === step.ownerRole);
            if (fallback && selected.length < cap && !usedRoleIds.has(fallback.id)){
              selected.push(fallback);
              usedRoleIds.add(fallback.id);
            }
          }
        }
      }

      const confidence = Math.max(0.4, Math.min(0.95, 0.75 + (selected.length >= 6 ? 0.1 : 0.05)));

      return {
        archetype,
        selectedRoles: selected.slice(0, cap),
        processes: requiredProcesses,
        confidence
      };
    }

    async function createCompany(){
      createBtn.disabled = true;
      createBtn.textContent = 'Generating...';
      generatedAt = Date.now();
      done.textContent=''; finalize.style.display='none'; companyCard.style.display='none'; proofCard.style.display='none'; trustBullets.style.display='none';
      bar.style.width='0%'; log.textContent='Initializing build pipeline...';

      const business = document.getElementById('business').value;
      const objective = document.getElementById('objective').value;
      const region = document.getElementById('region').value;
      const nAgents = Number(agents.value);
      const selectedFeatures = chips.filter(c=>c.classList.contains('active')).map(c=>c.textContent.trim());

      const lines = [
        `Analyzing market template: ${business}`,
        `Allocating ${nAgents} specialized agents...`,
        `Activating objective mode: ${objective}`,
        `Configuring region stack: ${region}`,
        `Enabling capabilities: ${selectedFeatures.join(', ') || 'Core stack only'}`,
        `Loading role/process datasets...`,
        `Compiling launch package...`,
        `Virtual company created successfully.`
      ];

      for(let i=0;i<lines.length;i++){
        await sleep(420);
        bar.style.width = `${Math.round(((i+1)/lines.length)*100)}%`;
        log.textContent += `\n> ${lines[i]}`;
      }

      try {
        const data = await loadData();
        const generation = generateOrg({ business, objective, teamSizeTarget: nAgents }, data);
        lastGeneration = generation;

        const name = `${business.split('/')[0].trim()} Velocity Co.`;
        document.getElementById('companyName').textContent = name;
        document.getElementById('companyMeta').textContent = `${business} • ${objective} • ${region} • ${generation.archetype.name}`;
        document.getElementById('kAgents').textContent = generation.selectedRoles.length;
        document.getElementById('kCaps').textContent = selectedFeatures.length || 1;

        proofList.innerHTML = `
          <li><strong>Archetype:</strong> ${generation.archetype.name}</li>
          <li><strong>Core processes:</strong> ${generation.processes.map(p=>p.name).join(' · ')}</li>
          <li><strong>Confidence:</strong> ${(generation.confidence*100).toFixed(0)}%</li>`;

        rolesGrid.innerHTML = generation.selectedRoles.slice(0,8).map(r => {
          const soul = `${r.soulTemplate?.identity || 'Operator'} — ${r.soulTemplate?.style || 'execution-focused'}`;
          return `<div class="roleCard"><div class="title">${r.name}</div><div class="soul">Soul: ${soul}</div></div>`;
        }).join('');
      } catch (err) {
        proofList.innerHTML = `<li><strong>Generation data error:</strong> dataset could not be loaded.</li>`;
        rolesGrid.innerHTML = '';
      }

      companyCard.style.display='block';
      proofCard.style.display='block';
      finalize.style.display='block';
      trustBullets.style.display='block';
      createBtn.disabled = false;
      createBtn.textContent = 'Regenerate Company';
    }

    createBtn.addEventListener('click', createCompany);

    document.getElementById('finalizeBtn').addEventListener('click', async ()=>{
      const email = emailInput.value.trim();
      if(!/^\S+@\S+\.\S+$/.test(email)){
        done.textContent='Please enter a valid email.';
        done.className='muted';
        return;
      }

      if (honeypotInput.value.trim() !== '') {
        done.textContent = 'Submission blocked.';
        done.className = 'muted';
        return;
      }

      if (!generatedAt || (Date.now() - generatedAt) < 3000) {
        done.textContent = 'Please review your setup for a moment, then submit again.';
        done.className = 'muted';
        return;
      }

      const payload = {
        email,
        agents: Number(agents.value),
        business: document.getElementById('business').value,
        objective: document.getElementById('objective').value,
        region: document.getElementById('region').value,
        features: chips.filter(c=>c.classList.contains('active')).map(c=>c.textContent.trim()),
        generatedCompany: document.getElementById('companyName').textContent,
        archetype: lastGeneration?.archetype?.name || '',
        generatedRoles: (lastGeneration?.selectedRoles || []).map(r=>r.name).join(', '),
        processes: (lastGeneration?.processes || []).map(p=>p.name).join(', '),
        submittedAt: new Date().toISOString(),
        source: 'idea-one-landing'
      };

      const btn = document.getElementById('finalizeBtn');
      btn.disabled = true;
      btn.textContent = 'Sending...';
      done.textContent = '';

      try {
        const res = await fetch('https://formsubmit.co/ajax/dantesofomor@gmail.com', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
          body: JSON.stringify({
            _subject: 'New Virtual Company Lead',
            _template: 'table',
            _captcha: 'true',
            _honey: honeypotInput.value,
            email: payload.email,
            agents: payload.agents,
            business_area: payload.business,
            primary_objective: payload.objective,
            operating_region: payload.region,
            features: payload.features.join(', '),
            generated_company: payload.generatedCompany,
            archetype: payload.archetype,
            generated_roles: payload.generatedRoles,
            core_processes: payload.processes,
            submitted_at: payload.submittedAt,
            source: payload.source
          })
        });

        if (!res.ok) throw new Error('submit_failed');
        done.innerHTML = `<span class='ok'>Done — your Virtual Company setup plan is on the way.</span>`;
        emailInput.value = '';
      } catch (e) {
        done.textContent = 'Could not submit right now. Please try again in a moment.';
      } finally {
        btn.disabled = false;
        btn.textContent = 'Send My Setup Plan';
      }
    });
  </script>
</body>
</html>

